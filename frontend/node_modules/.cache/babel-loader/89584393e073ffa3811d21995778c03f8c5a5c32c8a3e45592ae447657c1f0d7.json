{"ast":null,"code":"import axios from './axiosConfig';\nimport { auth } from './firebase-config';\nclass AIAgent {\n  constructor() {\n    this.conversationHistory = [];\n    this.currentStage = 'greeting';\n  }\n  async processUserInput(userInput, platform, conversationId) {\n    this.conversationHistory.push({\n      role: 'user',\n      content: userInput\n    });\n    const systemMessage = this.constructSystemMessage(platform);\n    const userMessage = this.constructUserMessage(userInput);\n    try {\n      var _auth$currentUser;\n      const token = await ((_auth$currentUser = auth.currentUser) === null || _auth$currentUser === void 0 ? void 0 : _auth$currentUser.getIdToken());\n      const response = await axios.post('/generate-text', {\n        platform,\n        systemMessage,\n        userMessage,\n        conversationId,\n        wordCount: 50\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      let aiResponse = response.data.generated_text;\n      aiResponse = this.postProcessResponse(aiResponse, platform);\n      this.conversationHistory.push({\n        role: 'assistant',\n        content: aiResponse\n      });\n      this.updateConversationStage(aiResponse, userInput);\n      return {\n        text: aiResponse,\n        conversationId: response.data.conversationId\n      };\n    } catch (error) {\n      console.error('Error in processing:', error);\n      throw error;\n    }\n  }\n  constructSystemMessage(platform) {\n    return `You are Sam, a professional Content Strategist for ${platform}. Provide concise, actionable advice for creating engaging posts. Use a friendly, professional tone. Limit responses to 50 words.`;\n  }\n  constructUserMessage(userInput) {\n    return `User's request: \"${userInput}\"\n\nRespond as Sam, the ${this.platform} Content Strategist. Provide specific, actionable advice related to the user's input.`;\n  }\n  postProcessResponse(response, platform) {\n    // Remove any part that looks like it's repeating the prompt\n    response = response.replace(/^(Sam:|As a professional Content Strategist for [^,]+,)/, '').trim();\n\n    // Ensure the response starts with an appropriate introduction\n    if (!response.startsWith(\"Here's my advice:\")) {\n      response = `Here's my advice: ${response}`;\n    }\n\n    // Truncate to 50 words if it's too long\n    const words = response.split(/\\s+/);\n    if (words.length > 50) {\n      response = words.slice(0, 50).join(' ') + '...';\n    }\n\n    // Ensure the response ends with proper punctuation\n    if (!/[.!?]$/.test(response)) {\n      response += '.';\n    }\n    return response;\n  }\n  updateConversationStage(aiResponse, userInput) {\n    // ... (keep the existing implementation)\n  }\n  resetConversation() {\n    this.conversationHistory = [];\n    this.currentStage = 'greeting';\n  }\n}\nconst aiAgent = new AIAgent();\nexport default aiAgent;","map":{"version":3,"names":["axios","auth","AIAgent","constructor","conversationHistory","currentStage","processUserInput","userInput","platform","conversationId","push","role","content","systemMessage","constructSystemMessage","userMessage","constructUserMessage","_auth$currentUser","token","currentUser","getIdToken","response","post","wordCount","headers","Authorization","aiResponse","data","generated_text","postProcessResponse","updateConversationStage","text","error","console","replace","trim","startsWith","words","split","length","slice","join","test","resetConversation","aiAgent"],"sources":["D:/Academic Courses/AI/LynqAI_v1/frontend/src/AIAgent.js"],"sourcesContent":["import axios from './axiosConfig';\r\nimport { auth } from './firebase-config';\r\n\r\nclass AIAgent {\r\n  constructor() {\r\n    this.conversationHistory = [];\r\n    this.currentStage = 'greeting';\r\n  }\r\n\r\n  async processUserInput(userInput, platform, conversationId) {\r\n    this.conversationHistory.push({ role: 'user', content: userInput });\r\n\r\n    const systemMessage = this.constructSystemMessage(platform);\r\n    const userMessage = this.constructUserMessage(userInput);\r\n\r\n    try {\r\n      const token = await auth.currentUser?.getIdToken();\r\n      const response = await axios.post('/generate-text', \r\n        { \r\n          platform, \r\n          systemMessage,\r\n          userMessage,\r\n          conversationId,\r\n          wordCount: 50\r\n        },\r\n        { \r\n          headers: { \r\n            Authorization: `Bearer ${token}`,\r\n            'Content-Type': 'application/json',\r\n          },\r\n        }\r\n      );\r\n\r\n      let aiResponse = response.data.generated_text;\r\n      aiResponse = this.postProcessResponse(aiResponse, platform);\r\n\r\n      this.conversationHistory.push({ role: 'assistant', content: aiResponse });\r\n      this.updateConversationStage(aiResponse, userInput);\r\n\r\n      return {\r\n        text: aiResponse,\r\n        conversationId: response.data.conversationId\r\n      };\r\n    } catch (error) {\r\n      console.error('Error in processing:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  constructSystemMessage(platform) {\r\n    return `You are Sam, a professional Content Strategist for ${platform}. Provide concise, actionable advice for creating engaging posts. Use a friendly, professional tone. Limit responses to 50 words.`;\r\n  }\r\n\r\n  constructUserMessage(userInput) {\r\n    return `User's request: \"${userInput}\"\r\n\r\nRespond as Sam, the ${this.platform} Content Strategist. Provide specific, actionable advice related to the user's input.`;\r\n  }\r\n\r\n  postProcessResponse(response, platform) {\r\n    // Remove any part that looks like it's repeating the prompt\r\n    response = response.replace(/^(Sam:|As a professional Content Strategist for [^,]+,)/, '').trim();\r\n\r\n    // Ensure the response starts with an appropriate introduction\r\n    if (!response.startsWith(\"Here's my advice:\")) {\r\n      response = `Here's my advice: ${response}`;\r\n    }\r\n\r\n    // Truncate to 50 words if it's too long\r\n    const words = response.split(/\\s+/);\r\n    if (words.length > 50) {\r\n      response = words.slice(0, 50).join(' ') + '...';\r\n    }\r\n\r\n    // Ensure the response ends with proper punctuation\r\n    if (!/[.!?]$/.test(response)) {\r\n      response += '.';\r\n    }\r\n\r\n    return response;\r\n  }\r\n\r\n  updateConversationStage(aiResponse, userInput) {\r\n    // ... (keep the existing implementation)\r\n  }\r\n\r\n  resetConversation() {\r\n    this.conversationHistory = [];\r\n    this.currentStage = 'greeting';\r\n  }\r\n}\r\n\r\nconst aiAgent = new AIAgent();\r\nexport default aiAgent;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}