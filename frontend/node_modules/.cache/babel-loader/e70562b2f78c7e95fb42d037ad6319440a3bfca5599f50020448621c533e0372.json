{"ast":null,"code":"import axios from './axiosConfig';\nimport { auth } from './firebase-config';\nclass AIAgent {\n  constructor() {\n    this.conversationHistory = [];\n    this.currentStage = 'initial';\n  }\n  async processUserInput(userInput, platform) {\n    this.conversationHistory.push({\n      role: 'user',\n      content: userInput\n    });\n    const prompt = this.constructPrompt(platform);\n    try {\n      var _auth$currentUser;\n      const token = await ((_auth$currentUser = auth.currentUser) === null || _auth$currentUser === void 0 ? void 0 : _auth$currentUser.getIdToken());\n      const response = await axios.post('/generate-text', {\n        platform,\n        prompt\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      const aiResponse = response.data.generated_text;\n      this.conversationHistory.push({\n        role: 'assistant',\n        content: aiResponse\n      });\n\n      // Update the conversation stage based on the AI's response\n      this.updateConversationStage(aiResponse);\n      return aiResponse;\n    } catch (error) {\n      console.error('Error in AI processing:', error);\n      throw error;\n    }\n  }\n  constructPrompt(platform) {\n    let prompt = `You are a viral content creator and AI assistant helping to create a ${platform} post. `;\n    prompt += `The current conversation stage is: ${this.currentStage}. `;\n    prompt += `Here's the conversation history:\\n\\n`;\n    this.conversationHistory.forEach(message => {\n      prompt += `${message.role}: ${message.content}\\n`;\n    });\n    prompt += `\\nBased on this conversation and the current stage, provide a helpful response. If the user is asking to generate or modify a post, do so. If they're asking questions, answer them. Always maintain a friendly and professional tone. Ask relevant questions to gather more information if needed.`;\n    return prompt;\n  }\n  updateConversationStage(aiResponse) {\n    // This is a simple example. You might want to use more sophisticated logic\n    if (aiResponse.includes(\"What topic\")) {\n      this.currentStage = 'topic';\n    } else if (aiResponse.includes(\"What's the main goal\")) {\n      this.currentStage = 'goal';\n    } else if (aiResponse.includes(\"Who's your target audience\")) {\n      this.currentStage = 'audience';\n    } else if (aiResponse.includes(\"What tone\")) {\n      this.currentStage = 'tone';\n    } else if (aiResponse.includes(\"How long\")) {\n      this.currentStage = 'length';\n    } else if (aiResponse.includes(\"Here's the post\")) {\n      this.currentStage = 'final';\n    }\n  }\n  resetConversation() {\n    this.conversationHistory = [];\n    this.currentStage = 'initial';\n  }\n}\nconst aiAgent = new AIAgent();\nexport default aiAgent;","map":{"version":3,"names":["axios","auth","AIAgent","constructor","conversationHistory","currentStage","processUserInput","userInput","platform","push","role","content","prompt","constructPrompt","_auth$currentUser","token","currentUser","getIdToken","response","post","headers","Authorization","aiResponse","data","generated_text","updateConversationStage","error","console","forEach","message","includes","resetConversation","aiAgent"],"sources":["D:/Academic Courses/AI/LynqAI_v1/frontend/src/AIAgent.js"],"sourcesContent":["import axios from './axiosConfig';\r\nimport { auth } from './firebase-config';\r\n\r\nclass AIAgent {\r\n  constructor() {\r\n    this.conversationHistory = [];\r\n    this.currentStage = 'initial';\r\n  }\r\n\r\n  async processUserInput(userInput, platform) {\r\n    this.conversationHistory.push({ role: 'user', content: userInput });\r\n\r\n    const prompt = this.constructPrompt(platform);\r\n\r\n    try {\r\n      const token = await auth.currentUser?.getIdToken();\r\n      const response = await axios.post('/generate-text', \r\n        { platform, prompt },\r\n        { \r\n          headers: { \r\n            Authorization: `Bearer ${token}`,\r\n            'Content-Type': 'application/json',\r\n          },\r\n        }\r\n      );\r\n\r\n      const aiResponse = response.data.generated_text;\r\n      this.conversationHistory.push({ role: 'assistant', content: aiResponse });\r\n\r\n      // Update the conversation stage based on the AI's response\r\n      this.updateConversationStage(aiResponse);\r\n\r\n      return aiResponse;\r\n    } catch (error) {\r\n      console.error('Error in AI processing:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  constructPrompt(platform) {\r\n    let prompt = `You are a viral content creator and AI assistant helping to create a ${platform} post. `;\r\n    prompt += `The current conversation stage is: ${this.currentStage}. `;\r\n    prompt += `Here's the conversation history:\\n\\n`;\r\n\r\n    this.conversationHistory.forEach(message => {\r\n      prompt += `${message.role}: ${message.content}\\n`;\r\n    });\r\n\r\n    prompt += `\\nBased on this conversation and the current stage, provide a helpful response. If the user is asking to generate or modify a post, do so. If they're asking questions, answer them. Always maintain a friendly and professional tone. Ask relevant questions to gather more information if needed.`;\r\n\r\n    return prompt;\r\n  }\r\n\r\n  updateConversationStage(aiResponse) {\r\n    // This is a simple example. You might want to use more sophisticated logic\r\n    if (aiResponse.includes(\"What topic\")) {\r\n      this.currentStage = 'topic';\r\n    } else if (aiResponse.includes(\"What's the main goal\")) {\r\n      this.currentStage = 'goal';\r\n    } else if (aiResponse.includes(\"Who's your target audience\")) {\r\n      this.currentStage = 'audience';\r\n    } else if (aiResponse.includes(\"What tone\")) {\r\n      this.currentStage = 'tone';\r\n    } else if (aiResponse.includes(\"How long\")) {\r\n      this.currentStage = 'length';\r\n    } else if (aiResponse.includes(\"Here's the post\")) {\r\n      this.currentStage = 'final';\r\n    }\r\n  }\r\n\r\n  resetConversation() {\r\n    this.conversationHistory = [];\r\n    this.currentStage = 'initial';\r\n  }\r\n}\r\n\r\nconst aiAgent = new AIAgent();\r\nexport default aiAgent;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}